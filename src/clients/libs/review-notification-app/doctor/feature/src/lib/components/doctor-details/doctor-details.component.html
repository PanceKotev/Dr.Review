<mat-card *ngIf="doctor">
  <mat-card-title
    >Детали за {{ doctor.firstName }} {{ doctor.lastName }}</mat-card-title
  >
  <mat-card-content>
    <div class="details-content">
      <div class="doctor-summary">
        <drreview-summary
          *ngIf="doctorReviewSummary"
          [summaryScore]="doctorReviewSummary.rating"
          [starByCount]="doctorReviewSummary.reviewCountByStar"
        ></drreview-summary>
      </div>
      <div class="doctor-details">
        <div class="field">
          <div>Локација</div>
          <div>{{ doctor.location }}</div>
        </div>
        <div class="field">
          <div>Специјализација</div>
          <div>{{ doctor.specialization }}</div>
        </div>
        <div class="field">
          <div>Институција</div>
          <div>{{ doctor.institution }}</div>
        </div>
      </div>
    </div>
  </mat-card-content>
  <drreview-current-user-review
    [comment]="comment!"
    [rating]="rating"
    (commentSave)="saveCommentClicked($event)"
  >
  </drreview-current-user-review>

  <div class="reviews">
    <drreview-review
      *ngIf="currentUserReview"
      [createdBy]="currentUserReview.reviewerName"
      [text]="currentUserReview.comment ?? ''"
      [givenRating]="currentUserReview.score"
      [numberOfLikes]="currentUserReview.upvotes"
      [numberOfDislikes]="currentUserReview.downvotes"
      [previousVote]="currentUserReview.previousUserVote"
      (reviewVotedOn)="handleReviewVote(currentUserReview.suid, $event)"
    >
    </drreview-review>
    Other comments
    <drreview-review
      *ngFor="let review of doctorReviews"
      [createdBy]="review.reviewerName"
      [text]="review.comment ?? ''"
      [givenRating]="review.score"
      [numberOfLikes]="review.upvotes"
      [numberOfDislikes]="review.downvotes"
      [previousVote]="review.previousUserVote"
      (reviewVotedOn)="handleReviewVote(review.suid, $event)"
    ></drreview-review>
  </div>
</mat-card>
