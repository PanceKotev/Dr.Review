<div class="schedules-root">
  <div class="schedules">
    <div class="schedule-header">
      <h1 class="schedules-title">Нотификациски претплати</h1>
      <button mat-icon-button (click)="toggleAllExpanded()">
        <mat-icon>
          {{ allExpanded ? 'expand_less' : 'expand_more' }}
        </mat-icon>
      </button>
    </div>
    <div class="schedule-checkbox-options">
      <mat-checkbox
        [indeterminate]="someChecked"
        (change)="selectAllCheckboxClicked($event.checked)"
        >Сите</mat-checkbox
      >
      <button
        mat-flat-button
        color="warn"
        [disabled]="!someChecked && !allChecked"
      >
        Избриши
      </button>
    </div>
    <div class="schedule-action-buttons">
      <button mat-stroked-button color="accent">Нова субскрипција</button>
      <button
        mat-stroked-button
        color="accent"
        [disabled]="!someChecked && !allChecked"
      >
        Измени
      </button>
    </div>
    <div class="accordion-schedules">
      <mat-accordion multi="true">
        <drreview-schedule-subscription-item
          *ngFor="let scheduleSubscription of subscriptions"
          [checked]="!!checkedSubscriptions[scheduleSubscription.suid]"
          [expanded]="!!expandedSubscriptions[scheduleSubscription.suid]"
          [range]="scheduleSubscription.range"
          [suid]="scheduleSubscription.suid"
          [lastName]="scheduleSubscription.doctor.lastName"
          [institution]="scheduleSubscription.doctor.institution"
          [location]="scheduleSubscription.doctor.location"
          [specialization]="scheduleSubscription.doctor.specialization"
          [firstName]="scheduleSubscription.doctor.firstName"
          [doctorSuid]="scheduleSubscription.doctor.suid"
          (checkedChanged)="onCheckboxClick(scheduleSubscription.suid, $event)"
          class="subscription-item"
        ></drreview-schedule-subscription-item>
      </mat-accordion>
    </div>
    <div class="schedule-pagination">
      <mat-paginator
        [length]="totalCount"
        [pageSize]="25"
        [pageSizeOptions]="[10, 15, 20, 25]"
        [pageIndex]="0"
        class="paginator"
      ></mat-paginator>
    </div>
  </div>
  <div class="calendar">
    <div class="calendar-header">
      <h1>Календар</h1>
    </div>
    <div class="mode-toggle">
      <mat-slide-toggle
        [(ngModel)]="editMode"
        (ngModelChange)="editModeChange($event)"
      >
        {{ editMode ? 'Едитирање' : 'Филтрирање' }}
      </mat-slide-toggle>
      <button mat-flat-button color="warn">Ресетирај</button>
    </div>
    <drreview-schedule-subscription-calendar
      [selectorColor]="
        editMode ? 'var(--color-accent)' : 'var(--color-primary)'
      "
      class="subscription-calendar"
    ></drreview-schedule-subscription-calendar>
  </div>
</div>
